apply plugin: 'java'

sourceCompatibility = 1.7
version = '1.0'

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.apache.hadoop:hadoop-mapreduce-client-core:2.6.0'
    compile 'org.apache.hadoop:hadoop-common:2.6.0'
    compile 'org.hsqldb:hsqldb:2.3.2'
    compile files('libs/AVIDemo.jar')
    testCompile group: 'junit', name: 'junit', version: '4.11'
}

task copyJarToLib(type: Copy) {
    into "build/libs/lib"
    from "libs"
}

jar {
    dependsOn copyJarToLib
}

task hadoop(type: Exec) {
    def jar = "build/libs/${rootProject.name}-${version}.jar"
    def myFile = file(jar)
    println myFile.name
    commandLine '/opt/hadoop/bin/hadoop', 'jar', myFile.name
}